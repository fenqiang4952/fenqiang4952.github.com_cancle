<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>stiveYan</title>
  <subtitle>不要辜负了自己所受的苦难！</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yanfenqiang.com/"/>
  <updated>2017-02-20T15:01:57.986Z</updated>
  <id>http://yanfenqiang.com/</id>
  
  <author>
    <name>stiveYan</name>
    <email>495246490@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>webpack纯新手入门（二）</title>
    <link href="http://yanfenqiang.com/2017/02/20/%E5%B7%A5%E5%85%B7/webpack%E7%BA%AF%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <id>http://yanfenqiang.com/2017/02/20/工具/webpack纯新手入门（二）/</id>
    <published>2017-02-20T15:01:52.567Z</published>
    <updated>2017-02-20T15:01:57.986Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>在<a href="http://yanfenqiang.com/2017/02/19/%E5%B7%A5%E5%85%B7/webpack%E7%BA%AF%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/#more">webpack纯新手入门（一）</a>中我们记录了，使用webpack在命令行中打包，以及css-loader的使用。在实际生产中，我们不可能针对每一个引用的文件写loader。所以我们需要配置文件去做一些批量的工作。</p>
</blockquote>
<h1 id="webpack基本配置"><a href="#webpack基本配置" class="headerlink" title="webpack基本配置"></a>webpack基本配置</h1><p>我们在我们的根目录中新建一个<code>webpack.config.js</code>文件.可以参考<a href="http://webpack.github.io/docs/configuration.html" target="_blank" rel="external">webpack的官网config相关</a>。<br>当我们在命令行中直接运行<code>webpack</code>命令的时候，webpack会默认去执行<em>webpack.config.js</em>文件。当然，我们也可以通过<code>webpack --config xx.js</code>让webpack运行其他的配置文件。<br>以下就是一个最简单的配置文件：</p>
<pre><code>module.exports = {
    entry: &apos;./src/script/main.js&apos;,
    output: {
        path: &apos;./dist/js&apos;,
        filename: &apos;bundle.js&apos;
    }
}
</code></pre><p><code>entry</code>是打包的入口,即输入。<code>output</code>为输出。<br>我们在命令行中运行<code>webpack</code>可查看打包的信息：</p>
<pre><code>Hash: 0bd4f09244f0e8c60354
Version: webpack 2.2.1
Time: 35ms
    Asset     Size  Chunks             Chunk Names
bundle.js  2.51 kB       0  [emitted]  main
   [0] ./src/script/main.js 0 bytes {0} [built]
</code></pre><p>可以看到打包成功。<br>我们还可以通过npm的脚本进行打包。在<code>package.json</code>中的<code>scripts</code>对象下配置：</p>
<pre><code>&quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
    &quot;webpack&quot;: &quot;webpack --config webpack.config.js&quot;
},
</code></pre><p>这时我们在命令行中通过，<code>npm run webpack</code>命令同样可以打包。<br>关于多个入口文件，以及多个出口文件的配置，在这里就不详细说了。请参考官网文档。</p>
<h1 id="loaders"><a href="#loaders" class="headerlink" title="loaders"></a>loaders</h1><h2 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h2><p><a href="http://babeljs.io/docs/setup/" target="_blank" rel="external">babel</a> 是一种将ES5，ES6，ES7等先进的JS语法解析成浏览器都可以识别的js语法的一种工具。<br>当我们用ES6编写js文件时，我们就需要对该文件进行处理。<br>我们在<em>webpack.config.js</em>中安装loader,对js文件进行处理。</p>
<pre><code>module.exports = {
    entry: &apos;./src/script/main.js&apos;,
    output: {
        path: &apos;./dist/js&apos;,
        filename: &apos;bundle.js&apos;
    },
    module: {
        loaders:[
            {
                test: /\.js$/,
                loader: &quot;babel&quot;,
                query: {
                    presets: [&apos;latest&apos;]
                }
            }
        ]
    }
}
</code></pre><p>安装方式如上，<code>loaders</code>为一个数组，可以有各种不同的loader。<br><code>test</code>表示要匹配的文件（正则表达式），<code>loader</code>就是处理该文件对应的loader了。<code>query</code>是需要用到的插件，这个需要具体根据不同的loader进行设置，可参考该loader的文档。<br>其他常用的loader还有<code>css-loader</code>,<code>style-loader</code>,<code>postcss-loader</code>,<code>html-loader</code>,<code>file-loader</code>等，基本用法大同小异，相信你看过一个后，其他的看看文档都没有问题了。<br>参考：<a href="http://webpack.github.io/docs/list-of-loaders.html" target="_blank" rel="external">官网的loaders列表</a></p>
<p>另外需要注意的是，对同一个文件应用多个loader时，处理顺序是从右到左，如下：</p>
<pre><code>{
    test: /\.less$/,
    loader: &quot;style!css!postcss!less&quot;
}
</code></pre><p>这种情况一定要注意loader的顺序。</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;在&lt;a href=&quot;http://yanfenqiang.com/2017/02/19/%E5%B7%A5%E5%85%B7/webpack%E7%BA%AF%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8%EF%BC%88
    
    </summary>
    
    
      <category term="webpack" scheme="http://yanfenqiang.com/tags/webpack/"/>
    
      <category term="工具" scheme="http://yanfenqiang.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>webpack纯新手入门（一）</title>
    <link href="http://yanfenqiang.com/2017/02/19/%E5%B7%A5%E5%85%B7/webpack%E7%BA%AF%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>http://yanfenqiang.com/2017/02/19/工具/webpack纯新手入门（一）/</id>
    <published>2017-02-19T10:12:10.811Z</published>
    <updated>2017-02-19T10:18:11.096Z</updated>
    
    <content type="html"><![CDATA[<h1 id="webpack-纯新手入门（一）"><a href="#webpack-纯新手入门（一）" class="headerlink" title="webpack 纯新手入门（一）"></a>webpack 纯新手入门（一）</h1><blockquote>
<p>以前也用webpack，但都是照着别人的模板改来改去，前几天看了慕课网上的<a href="http://www.imooc.com/learn/802" target="_blank" rel="external"><em>《webpack深入与实战》</em></a>，讲的非常nice,我怕自己忘了，于是周末小总结一下。</p>
</blockquote>
<h2 id="安装webpack"><a href="#安装webpack" class="headerlink" title="安装webpack"></a>安装webpack</h2><p>安装webpack,首先需要安装node.js和npm。能看webpack相信对这些东西已不在话下。再这里就不详细说了。<br><a id="more"></a></p>
<hr>
<p>新建一个文件夹webpack-test，用<code>npm init</code> 初始化。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir webpack-test</div><div class="line">cd webpack-test</div><div class="line">npm init</div></pre></td></tr></table></figure></p>
<p>一路回车后，再安装webpack<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install webpack --save-dev</div></pre></td></tr></table></figure></p>
<p>在package.json中可以看到我们安装的webpack:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&quot;devDependencies&quot;: &#123;</div><div class="line">    &quot;webpack&quot;: &quot;^2.2.1&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="用webpack打包一个文件"><a href="#用webpack打包一个文件" class="headerlink" title="用webpack打包一个文件"></a>用webpack打包一个文件</h2><hr>
<p>安装好webpack后，我们在根目录下新建一个hello.js文件，随便写点内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">function hello(str) &#123;</div><div class="line">    alert(str);</div><div class="line">&#125;</div><div class="line">hello(&quot;hello world!&quot;);</div></pre></td></tr></table></figure></p>
<p>然后在命令行中去打包这个文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webpack hello.js hello.bundle.js</div></pre></td></tr></table></figure></p>
<p>出现如下内容则表示我们打包成功了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Hash: b387ee2c74b71f989b02</div><div class="line">Version: webpack 2.2.1</div><div class="line">Time: 39ms</div><div class="line">         Asset     Size  Chunks             Chunk Names</div><div class="line">hello.bundle.js  2.57 kB       0  [emitted]  main</div><div class="line">  [0] ./hello.js 65 bytes &#123;0&#125; [built]</div></pre></td></tr></table></figure></p>
<p>以上就是本次打包的相关信息</p>
<h2 id="处理css文件"><a href="#处理css文件" class="headerlink" title="处理css文件"></a>处理css文件</h2><hr>
<p>我们新建一个css文件style.css，随便写点样式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">html,</div><div class="line">body &#123;</div><div class="line">    padding: 0;</div><div class="line">    margin: 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后在hello.js中引入style.css.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">require(&quot;./style.css&quot;);</div></pre></td></tr></table></figure></p>
<p>然后在命令行中再对hello.js文件进行打包，我们会发现报错：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ERROR in ./style.css</div><div class="line">Module parse failed: D:\workspace\webpack\webpack-test\style.css Unexpected token (2:5)</div><div class="line">You may need an appropriate loader to handle this file type.</div><div class="line">| html,</div><div class="line">| body &#123;</div><div class="line">|     padding: 0;</div><div class="line">|     margin: 0;</div><div class="line"> @ ./hello.js 1:0-22</div></pre></td></tr></table></figure></p>
<p>错误中指出我们需要一个loader去处理css这种文件类型。<br>我们在命令行中安装css-loader和style-loader后在进行打包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm i css-loader style-loader --save-dev</div><div class="line">webpack hello.js hello.bundle.js</div></pre></td></tr></table></figure></p>
<p>发现还是会报一样的错误，这是因为我们虽然安装了loader，但并没有指定该loader去处理css文件，<br>我们在引用style.css文件的地方修改一下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">require(&quot;style-loader!css-loader!./style.css&quot;);</div></pre></td></tr></table></figure></p>
<p>然后再进行打包，可以发现没有报错，且打包信息中可以看出已经对style.css进行了打包。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Hash: beaf20e933b8e91d3dc1</div><div class="line">Version: webpack 2.2.1</div><div class="line">Time: 488ms</div><div class="line">          Asset     Size  Chunks             Chunk Names</div><div class="line">hello.bundle.js  12.5 kB       0  [emitted]  main</div><div class="line">   [0] ./~/style-loader!./~/css-loader!./style.css 895 bytes &#123;0&#125; [built]</div><div class="line">   [1] ./~/css-loader!./style.css 210 bytes &#123;0&#125; [built]</div><div class="line">   [2] ./~/css-loader/lib/css-base.js 1.51 kB &#123;0&#125; [built]</div><div class="line">   [3] ./~/style-loader/addStyles.js 7.15 kB &#123;0&#125; [built]</div><div class="line">   [4] ./hello.js 116 bytes &#123;0&#125; [built]</div></pre></td></tr></table></figure></p>
<p>我们可以新建一个index.html文件将打包完成的hello.bundle.js引入，在浏览器中观察效果。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;webpack-纯新手入门（一）&quot;&gt;&lt;a href=&quot;#webpack-纯新手入门（一）&quot; class=&quot;headerlink&quot; title=&quot;webpack 纯新手入门（一）&quot;&gt;&lt;/a&gt;webpack 纯新手入门（一）&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;以前也用webpack，但都是照着别人的模板改来改去，前几天看了慕课网上的&lt;a href=&quot;http://www.imooc.com/learn/802&quot;&gt;&lt;em&gt;《webpack深入与实战》&lt;/em&gt;&lt;/a&gt;，讲的非常nice,我怕自己忘了，于是周末小总结一下。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;安装webpack&quot;&gt;&lt;a href=&quot;#安装webpack&quot; class=&quot;headerlink&quot; title=&quot;安装webpack&quot;&gt;&lt;/a&gt;安装webpack&lt;/h2&gt;&lt;p&gt;安装webpack,首先需要安装node.js和npm。能看webpack相信对这些东西已不在话下。再这里就不详细说了。&lt;br&gt;
    
    </summary>
    
    
      <category term="webpack" scheme="http://yanfenqiang.com/tags/webpack/"/>
    
      <category term="工具" scheme="http://yanfenqiang.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>css3美化checkbox</title>
    <link href="http://yanfenqiang.com/2017/02/15/css3/css3%E7%BE%8E%E5%8C%96checkbox/"/>
    <id>http://yanfenqiang.com/2017/02/15/css3/css3美化checkbox/</id>
    <published>2017-02-15T14:58:19.284Z</published>
    <updated>2017-02-15T15:19:07.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="CSS美化的checkbox"><a href="#CSS美化的checkbox" class="headerlink" title="CSS美化的checkbox."></a>CSS美化的checkbox.</h2><ul>
<li><h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;checkbox_box&quot;&gt;</div><div class="line">    &lt;input type=&quot;checkbox&quot; class=&quot;selectCheckBox&quot; id=checkBoxId checked=&quot;true&quot; /&gt;</div><div class="line">    &lt;label for=checkBoxId&gt;&lt;span&gt;我要分享到APP作品大厅&lt;/span&gt;&lt;/label&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<a id="more"></a>
<ul>
<li><h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">.content .shareBook .checkbox_box &#123;</div><div class="line">    display: inline-block;</div><div class="line">    position: relative;</div><div class="line">    width: 25px;</div><div class="line">    height: 25px;</div><div class="line">    padding-left: 5px;</div><div class="line">    line-height: 18px;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.content .shareBook label &#123;</div><div class="line">    cursor: pointer;</div><div class="line">    position: absolute;</div><div class="line">    width: 18px;</div><div class="line">    height: 18px;</div><div class="line">    top: 0;</div><div class="line">    left: 0;</div><div class="line">    background: #FFFFFF;</div><div class="line">    border: 1px solid #FF9D00;</div><div class="line">    border-radius: 2px;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.content .shareBook label span &#123;</div><div class="line">    width: 200px;</div><div class="line">    display: inline-block;</div><div class="line">    padding-left: 25px;</div><div class="line">    font-weight: normal;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.content .shareBook label:before &#123;</div><div class="line">    opacity: 0.2;</div><div class="line">    content: &apos;&apos;;</div><div class="line">    position: absolute;</div><div class="line">    width: 12px;</div><div class="line">    height: 7px;</div><div class="line">    background: transparent;</div><div class="line">    top: 4px;</div><div class="line">    left: 3px;</div><div class="line">    border: 3px solid #FFFFFF;</div><div class="line">    border-top: none;</div><div class="line">    border-right: none;</div><div class="line">    -webkit-transform: rotate(-45deg);</div><div class="line">    -moz-transform: rotate(-45deg);</div><div class="line">    -ms-transform: rotate(-45deg);</div><div class="line">    transform: rotate(-45deg);</div><div class="line">&#125;</div><div class="line"></div><div class="line">.content .shareBook input[type=checkbox]:checked + label &#123;</div><div class="line">    background: #FF9D00;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.content .shareBook input[type=checkbox]:checked + label:before &#123;</div><div class="line">    opacity: 1;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;CSS美化的checkbox&quot;&gt;&lt;a href=&quot;#CSS美化的checkbox&quot; class=&quot;headerlink&quot; title=&quot;CSS美化的checkbox.&quot;&gt;&lt;/a&gt;CSS美化的checkbox.&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;h3 id=&quot;HTML&quot;&gt;&lt;a href=&quot;#HTML&quot; class=&quot;headerlink&quot; title=&quot;HTML&quot;&gt;&lt;/a&gt;HTML&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;div class=&amp;quot;checkbox_box&amp;quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;input type=&amp;quot;checkbox&amp;quot; class=&amp;quot;selectCheckBox&amp;quot; id=checkBoxId checked=&amp;quot;true&amp;quot; /&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;label for=checkBoxId&amp;gt;&amp;lt;span&amp;gt;我要分享到APP作品大厅&amp;lt;/span&amp;gt;&amp;lt;/label&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;/div&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="html5" scheme="http://yanfenqiang.com/tags/html5/"/>
    
      <category term="css3" scheme="http://yanfenqiang.com/tags/css3/"/>
    
      <category term="checkbox" scheme="http://yanfenqiang.com/tags/checkbox/"/>
    
  </entry>
  
  <entry>
    <title>express入门</title>
    <link href="http://yanfenqiang.com/2017/02/12/html5/express%E5%85%A5%E9%97%A8/"/>
    <id>http://yanfenqiang.com/2017/02/12/html5/express入门/</id>
    <published>2017-02-12T12:43:03.673Z</published>
    <updated>2017-02-12T12:44:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>创建一个myapp项目</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm init</div><div class="line">$ npm install express --save</div></pre></td></tr></table></figure>
<h2 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h2><p>进入myapp目录，创建一个名为app.js的文件</p>
<p>键入以下内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var express = require(&apos;express&apos;);</div><div class="line">var app = express();</div><div class="line"></div><div class="line">app.get(&apos;/&apos;, function (req, res) &#123;</div><div class="line">  res.send(&apos;Hello World!&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">var server = app.listen(3000, function () &#123;</div><div class="line">  var host = server.address().address;</div><div class="line">  var port = server.address().port;</div><div class="line"></div><div class="line">  console.log(&apos;Example app listening at http://%s:%s&apos;, host, port);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>上面的代码启动一个服务并监听从 3000 端口进入的所有连接请求。他将对所有 (/) URL 或 路由 返回 “<strong>Hello World!</strong>” 字符串。对于其他所有路径全部返回  <strong>404 Not Found。</strong></p>
<p>通过如下命令启动程序,在浏览器中打开<strong><a href="http://localhost:3000/" target="_blank" rel="external">http://localhost:3000/</a></strong> 查看效果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ node app.js</div></pre></td></tr></table></figure></p>
<h2 id="Express-应用生成器"><a href="#Express-应用生成器" class="headerlink" title="Express 应用生成器"></a>Express 应用生成器</h2><p>通过应用生成器工具 express 可以快速创建一个应用的骨架。</p>
<p>通过如下命令安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install express-generator -g</div></pre></td></tr></table></figure></p>
<p>例如，下面的示例就是在当前工作目录下创建一个命名为<strong><em>myapp</em></strong> 的应用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$ express myapp</div><div class="line"></div><div class="line">   create : myapp</div><div class="line">   create : myapp/package.json</div><div class="line">   create : myapp/app.js</div><div class="line">   create : myapp/public</div><div class="line">   create : myapp/public/javascripts</div><div class="line">   create : myapp/public/images</div><div class="line">   create : myapp/routes</div><div class="line">   create : myapp/routes/index.js</div><div class="line">   create : myapp/routes/users.js</div><div class="line">   create : myapp/public/stylesheets</div><div class="line">   create : myapp/public/stylesheets/style.css</div><div class="line">   create : myapp/views</div><div class="line">   create : myapp/views/index.jade</div><div class="line">   create : myapp/views/layout.jade</div><div class="line">   create : myapp/views/error.jade</div><div class="line">   create : myapp/bin</div><div class="line">   create : myapp/bin/www</div></pre></td></tr></table></figure></p>
<p>安装所有依赖包,后启动应用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ DEBUG=myapp npm start</div></pre></td></tr></table></figure></p>
<p>window平台：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; set DEBUG=myapp &amp; npm start</div></pre></td></tr></table></figure></p>
<p>通过 Express 应用生成器创建的应用一般都有如下目录结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── app.js</div><div class="line">├── bin</div><div class="line">│   └── www</div><div class="line">├── package.json</div><div class="line">├── public</div><div class="line">│   ├── images</div><div class="line">│   ├── javascripts</div><div class="line">│   └── stylesheets</div><div class="line">│       └── style.css</div><div class="line">├── routes</div><div class="line">│   ├── index.js</div><div class="line">│   └── users.js</div><div class="line">└── views</div><div class="line">    ├── error.jade</div><div class="line">    ├── index.jade</div><div class="line">    └── layout.jade</div><div class="line"></div><div class="line">7 directories, 9 files</div></pre></td></tr></table></figure>
<h2 id="一个简单的-Express-路由"><a href="#一个简单的-Express-路由" class="headerlink" title="一个简单的 Express 路由"></a>一个简单的 Express 路由</h2><p>每一个路由都可以有一个或者多个处理器函数，当匹配到路由时，这个/些函数将被执行。</p>
<p>路由的定义由如下结构组成：app.METHOD(PATH, HANDLER)。其中，app 是一个 express 实例；METHOD 是某个 HTTP 请求方式中的一个；PATH 是服务器端的路径；HANDLER 是当路由匹配到时需要执行的函数。</p>
<p>下面的代码展示了几个路由实例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// 对网站首页的访问返回 &quot;Hello World!&quot; 字样</div><div class="line">app.get(&apos;/&apos;, function (req, res) &#123;</div><div class="line">  res.send(&apos;Hello World!&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 网站首页接受 POST 请求</div><div class="line">app.post(&apos;/&apos;, function (req, res) &#123;</div><div class="line">  res.send(&apos;Got a POST request&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// /user 节点接受 PUT 请求</div><div class="line">app.put(&apos;/user&apos;, function (req, res) &#123;</div><div class="line">  res.send(&apos;Got a PUT request at /user&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// /user 节点接受 DELETE 请求</div><div class="line">app.delete(&apos;/user&apos;, function (req, res) &#123;</div><div class="line">  res.send(&apos;Got a DELETE request at /user&apos;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="利用-Express-托管静态文件"><a href="#利用-Express-托管静态文件" class="headerlink" title="利用 Express 托管静态文件"></a>利用 Express 托管静态文件</h2><p>通过 Express 内置的 express.static 可以方便地托管静态文件，例如图片、CSS、JavaScript 文件等。</p>
<p>将静态资源文件所在的目录作为参数传递给 express.static 中间件就可以提供静态资源文件的访问了。例如，假设在 public 目录放置了图片、CSS 和 JavaScript 文件，你就可以：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">app.use(express.static(&apos;public&apos;));</div></pre></td></tr></table></figure>
<p>现在，public 目录下面的文件就可以访问了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">http://localhost:3000/images/kitten.jpg</div><div class="line">http://localhost:3000/css/style.css</div><div class="line">http://localhost:3000/js/app.js</div><div class="line">http://localhost:3000/images/bg.png</div><div class="line">http://localhost:3000/hello.html</div></pre></td></tr></table></figure></p>
<p>如果你希望所有通过 express.static 访问的文件都存放在一个“虚拟（virtual）”目录（即目录根本不存在）下面，可以通过为静态资源目录指定一个挂载路径的方式来实现，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">app.use(&apos;/static&apos;, express.static(&apos;public&apos;));</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;创建一个myapp项目&lt;/p&gt;
&lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ npm init&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ npm install express --save&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;hello-world&quot;&gt;&lt;a href=&quot;#hello-world&quot; class=&quot;headerlink&quot; title=&quot;hello world&quot;&gt;&lt;/a&gt;hello world&lt;/h2&gt;&lt;p&gt;进入myapp目录，创建一个名为app.js的文件&lt;/p&gt;
&lt;p&gt;键入以下内容&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;var express = require(&amp;apos;express&amp;apos;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;var app = express();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;app.get(&amp;apos;/&amp;apos;, function (req, res) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  res.send(&amp;apos;Hello World!&amp;apos;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;var server = app.listen(3000, function () &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  var host = server.address().address;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  var port = server.address().port;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  console.log(&amp;apos;Example app listening at http://%s:%s&amp;apos;, host, port);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="express" scheme="http://yanfenqiang.com/tags/express/"/>
    
      <category term="node" scheme="http://yanfenqiang.com/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>css3自定义radio</title>
    <link href="http://yanfenqiang.com/2017/02/12/html5/CSS3%E8%87%AA%E5%AE%9A%E4%B9%89radio/"/>
    <id>http://yanfenqiang.com/2017/02/12/html5/CSS3自定义radio/</id>
    <published>2017-02-12T12:03:24.283Z</published>
    <updated>2017-02-12T12:10:38.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="HTML部分代码"><a href="#HTML部分代码" class="headerlink" title="HTML部分代码"></a>HTML部分代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;form action=&quot;#&quot;&gt;</div><div class="line">  &lt;div class=&quot;wrapper&quot;&gt;</div><div class="line">    &lt;div class=&quot;box&quot;&gt;</div><div class="line">      &lt;input type=&quot;radio&quot; checked=&quot;checked&quot;  id=&quot;boy&quot; name=&quot;1&quot; /&gt;&lt;span&gt;&lt;/span&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">    &lt;label for=&quot;boy&quot;&gt;男&lt;/label&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">  </div><div class="line">  &lt;div class=&quot;wrapper&quot;&gt;</div><div class="line">    &lt;div class=&quot;box&quot;&gt;</div><div class="line">      &lt;input type=&quot;radio&quot;  id=&quot;girl&quot; name=&quot;1&quot;  /&gt;&lt;span&gt;&lt;/span&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">    &lt;label for=&quot;girl&quot;&gt;女&lt;/label&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;/form&gt;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="CSS代码"><a href="#CSS代码" class="headerlink" title="CSS代码"></a>CSS代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">form &#123;</div><div class="line">  border: 1px solid #ccc;</div><div class="line">  padding: 20px;</div><div class="line">  width: 300px;</div><div class="line">  margin: 30px auto;</div><div class="line">&#125;</div><div class="line">.wrapper &#123;</div><div class="line">  margin-bottom: 10px;</div><div class="line">&#125;</div><div class="line">.box &#123;</div><div class="line">  display: inline-block;</div><div class="line">  width: 30px;</div><div class="line">  height: 30px;</div><div class="line">  margin-right: 10px;</div><div class="line">  position: relative;</div><div class="line">  background: orange;</div><div class="line">  vertical-align: middle;</div><div class="line">  border-radius: 100%;</div><div class="line">&#125;</div><div class="line">.box input &#123;</div><div class="line">  opacity: 0;</div><div class="line">  position: absolute;</div><div class="line">  top:0;</div><div class="line">  left:0;</div><div class="line">  width: 100%;</div><div class="line">  height:100%;</div><div class="line">  z-index:100;/*使input按钮在span的上一层，不加点击区域会出现不灵敏*/</div><div class="line">&#125;</div><div class="line"></div><div class="line">.box span &#123; </div><div class="line">  display: block;</div><div class="line">  width: 10px;</div><div class="line">  height: 10px;</div><div class="line">  border-radius: 100%;</div><div class="line">  position: absolute;</div><div class="line">  background: #fff;</div><div class="line">  top: 50%;</div><div class="line">  left:50%;</div><div class="line">  margin: -5px 0  0 -5px;</div><div class="line">  z-index:1;</div><div class="line">&#125;</div><div class="line"></div><div class="line">input[type=&quot;radio&quot;] + span &#123;</div><div class="line">  opacity: 0;</div><div class="line"></div><div class="line">&#125;</div><div class="line">input[type=&quot;radio&quot;]:checked + span &#123;</div><div class="line">  opacity: 1;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="效果图预览"><a href="#效果图预览" class="headerlink" title="效果图预览"></a>效果图预览</h2><p><img src="http://img.blog.csdn.net/20160629215805675" alt="C333自定义radio效果图"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;HTML部分代码&quot;&gt;&lt;a href=&quot;#HTML部分代码&quot; class=&quot;headerlink&quot; title=&quot;HTML部分代码&quot;&gt;&lt;/a&gt;HTML部分代码&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;form action=&amp;quot;#&amp;quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;lt;div class=&amp;quot;wrapper&amp;quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;div class=&amp;quot;box&amp;quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;lt;input type=&amp;quot;radio&amp;quot; checked=&amp;quot;checked&amp;quot;  id=&amp;quot;boy&amp;quot; name=&amp;quot;1&amp;quot; /&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;label for=&amp;quot;boy&amp;quot;&amp;gt;男&amp;lt;/label&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;lt;div class=&amp;quot;wrapper&amp;quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;div class=&amp;quot;box&amp;quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;lt;input type=&amp;quot;radio&amp;quot;  id=&amp;quot;girl&amp;quot; name=&amp;quot;1&amp;quot;  /&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;label for=&amp;quot;girl&amp;quot;&amp;gt;女&amp;lt;/label&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;/form&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="html5" scheme="http://yanfenqiang.com/tags/html5/"/>
    
      <category term="css3" scheme="http://yanfenqiang.com/tags/css3/"/>
    
      <category term="radio" scheme="http://yanfenqiang.com/tags/radio/"/>
    
  </entry>
  
  <entry>
    <title>js向webview发送URL</title>
    <link href="http://yanfenqiang.com/2017/02/12/html5/js%E5%90%91webview%E5%8F%91%E9%80%81URL/"/>
    <id>http://yanfenqiang.com/2017/02/12/html5/js向webview发送URL/</id>
    <published>2017-02-12T11:58:10.616Z</published>
    <updated>2017-02-12T12:11:39.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1、在js中通过"><a href="#1、在js中通过" class="headerlink" title="1、在js中通过"></a>1、在js中通过</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">window.location.href=&quot;MDWebBridge://PushWebView?url=&quot;+EncodeUtf8(_url_)+&quot;&amp;title=&quot;+EncodeUtf8(_title_);</div></pre></td></tr></table></figure>
<p>向webview发送URL，其中MDWebBridge、PushWebView都是自定义的，只需保证js与native一致即可。<br><a id="more"></a></p>
<h3 id="2、必须转码，通过EncodeUtrf8（）"><a href="#2、必须转码，通过EncodeUtrf8（）" class="headerlink" title="2、必须转码，通过EncodeUtrf8（）."></a>2、必须转码，通过EncodeUtrf8（）.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line">// 字符串转换utf-8  </div><div class="line">    function EncodeUtf8(s1) &#123;</div><div class="line">        // escape函数用于对除英文字母外的字符进行编码。如“Visit W3School!”-&gt;&quot;Visit%20W3School%21&quot;  </div><div class="line">        var s = escape(s1);</div><div class="line">        var sa = s.split(&quot;%&quot;); //sa[1]=u6211  </div><div class="line">        var retV = &quot;&quot;;</div><div class="line">        if (sa[0] != &quot;&quot;) &#123;</div><div class="line">            retV = sa[0];</div><div class="line">        &#125;</div><div class="line">        for (var i = 1; i &lt; sa.length; i++) &#123;</div><div class="line">            if (sa[i].substring(0, 1) == &quot;u&quot;) &#123;</div><div class="line">                retV += Hex2Utf8(Str2Hex(sa[i].substring(1, 5)));</div><div class="line">                if (sa[i].length &gt;= 6) &#123;</div><div class="line">                    retV += sa[i].substring(5);</div><div class="line">                &#125;</div><div class="line">            &#125; else retV += &quot;%&quot; + sa[i];</div><div class="line">        &#125;</div><div class="line">        return retV;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    function Str2Hex(s) &#123;</div><div class="line">        var c = &quot;&quot;;</div><div class="line">        var n;</div><div class="line">        var ss = &quot;0123456789ABCDEF&quot;;</div><div class="line">        var digS = &quot;&quot;;</div><div class="line">        for (var i = 0; i &lt; s.length; i++) &#123;</div><div class="line">            c = s.charAt(i);</div><div class="line">            n = ss.indexOf(c);</div><div class="line">            digS += Dec2Dig(eval(n));</div><div class="line"></div><div class="line">        &#125;</div><div class="line">        //return value;  </div><div class="line">        return digS;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    function Dec2Dig(n1) &#123;</div><div class="line">        var s = &quot;&quot;;</div><div class="line">        var n2 = 0;</div><div class="line">        for (var i = 0; i &lt; 4; i++) &#123;</div><div class="line">            n2 = Math.pow(2, 3 - i);</div><div class="line">            if (n1 &gt;= n2) &#123;</div><div class="line">                s += &apos;1&apos;;</div><div class="line">                n1 = n1 - n2;</div><div class="line">            &#125; else</div><div class="line">                s += &apos;0&apos;;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">        return s;</div><div class="line"></div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    function Dig2Dec(s) &#123;</div><div class="line">        var retV = 0;</div><div class="line">        if (s.length == 4) &#123;</div><div class="line">            for (var i = 0; i &lt; 4; i++) &#123;</div><div class="line">                retV += eval(s.charAt(i)) * Math.pow(2, 3 - i);</div><div class="line">            &#125;</div><div class="line">            return retV;</div><div class="line">        &#125;</div><div class="line">        return -1;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    function Hex2Utf8(s) &#123;</div><div class="line">        var retS = &quot;&quot;;</div><div class="line">        var tempS = &quot;&quot;;</div><div class="line">        var ss = &quot;&quot;;</div><div class="line">        if (s.length == 16) &#123;</div><div class="line">            tempS = &quot;1110&quot; + s.substring(0, 4);</div><div class="line">            tempS += &quot;10&quot; + s.substring(4, 10);</div><div class="line">            tempS += &quot;10&quot; + s.substring(10, 16);</div><div class="line">            var sss = &quot;0123456789ABCDEF&quot;;</div><div class="line">            for (var i = 0; i &lt; 3; i++) &#123;</div><div class="line">                retS += &quot;%&quot;;</div><div class="line">                ss = tempS.substring(i * 8, (eval(i) + 1) * 8);</div><div class="line"></div><div class="line">                retS += sss.charAt(Dig2Dec(ss.substring(0, 4)));</div><div class="line">                retS += sss.charAt(Dig2Dec(ss.substring(4, 8)));</div><div class="line">            &#125;</div><div class="line">            return retS;</div><div class="line">        &#125;</div><div class="line">        return &quot;&quot;;</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1、在js中通过&quot;&gt;&lt;a href=&quot;#1、在js中通过&quot; class=&quot;headerlink&quot; title=&quot;1、在js中通过&quot;&gt;&lt;/a&gt;1、在js中通过&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;window.location.href=&amp;quot;MDWebBridge://PushWebView?url=&amp;quot;+EncodeUtf8(_url_)+&amp;quot;&amp;amp;title=&amp;quot;+EncodeUtf8(_title_);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;向webview发送URL，其中MDWebBridge、PushWebView都是自定义的，只需保证js与native一致即可。&lt;br&gt;
    
    </summary>
    
    
      <category term="html5" scheme="http://yanfenqiang.com/tags/html5/"/>
    
      <category term="移动端" scheme="http://yanfenqiang.com/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
      <category term="webview" scheme="http://yanfenqiang.com/tags/webview/"/>
    
  </entry>
  
  <entry>
    <title>HTML5、formData移动浏览器上传图片</title>
    <link href="http://yanfenqiang.com/2017/02/12/html5/HTML5%E3%80%81formData%E7%A7%BB%E5%8A%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/"/>
    <id>http://yanfenqiang.com/2017/02/12/html5/HTML5、formData移动浏览器上传图片/</id>
    <published>2017-02-12T11:46:09.843Z</published>
    <updated>2017-02-12T12:10:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>####　该上传方法对于不支持html5的浏览器无法使用。主要针对移动浏览器。</p>
<h3 id="1、html"><a href="#1、html" class="headerlink" title="1、html"></a>1、html</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;upload_img&quot;&gt;</div><div class="line">    &lt;div  class=&quot;file&quot;&gt;</div><div class="line">        &lt;span class=&quot;plus&quot;&gt;+&lt;/span&gt;</div><div class="line">        &lt;span class=&quot;text&quot;&gt;请拍照上传&lt;/span&gt;</div><div class="line">        &lt;input  class=&quot;fileupload&quot; type=&quot;file&quot; name=&quot;fangchanzheng1&quot; accept=&quot;image/*&quot; capture=&quot;camera&quot; /&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">    &lt;p class=&quot;info&quot;&gt; 房产证照片 &lt;/p&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<ul>
<li>type 是file 加上<strong>capture=”camera”</strong> 可以在移动端打开摄像头。<a id="more"></a>
<h3 id="2、CSS"><a href="#2、CSS" class="headerlink" title="2、CSS"></a>2、CSS</h3>修改上传文件按钮的css<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">.info &#123;</div><div class="line">    text-align: center;</div><div class="line">    height: 36px;</div><div class="line">    line-height: 36px;</div><div class="line">    color: #666666;</div><div class="line">    font-size: 12px;</div><div class="line">&#125;</div><div class="line">.file .plus &#123;</div><div class="line">    display: inline-block;</div><div class="line">    width: 100%;</div><div class="line">    font-size: 86px;</div><div class="line">    text-align: center;</div><div class="line">    line-height: 67px;</div><div class="line"></div><div class="line">&#125;</div><div class="line">.file .text &#123;</div><div class="line">    position: absolute;</div><div class="line">    display: block;</div><div class="line">    bottom: 12px;</div><div class="line">    width: 100%;</div><div class="line">    text-align: center; </div><div class="line">    height: 20px;</div><div class="line">    line-height: 20px;</div><div class="line">&#125;</div><div class="line">.file &#123;</div><div class="line">    position: relative;</div><div class="line">    display: inline-block;</div><div class="line">    background: #F3F3F3;</div><div class="line">    border:1px solid #DCDCDC;</div><div class="line">    color: #999999;</div><div class="line">    border-radius: 0;</div><div class="line">    text-decoration: none;</div><div class="line">    text-indent: 0;</div><div class="line">    line-height: 20px;</div><div class="line">    font-size: 12px;</div><div class="line">    letter-spacing: normal;</div><div class="line">    width: 100%;</div><div class="line">    height: 96px;</div><div class="line">    overflow: hidden;</div><div class="line">    text-align: center;</div><div class="line">    line-height: 96px;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.file input &#123;</div><div class="line">    position: absolute;</div><div class="line">    font-size: 100px;</div><div class="line">    right: 0;</div><div class="line">    top: 0;</div><div class="line">    opacity: 0;</div><div class="line">    width: 100%;</div><div class="line">    height: 96px;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3、图片预览"><a href="#3、图片预览" class="headerlink" title="3、图片预览"></a>3、图片预览</h3><ul>
<li>图片预览使用了插件 <a href="https://github.com/blueimp/JavaScript-Load-Image" target="_blank" rel="external">https://github.com/blueimp/JavaScript-Load-Image</a></li>
<li>代码如下，给上传按钮绑定change事件，change后调用thumbnail方法，在方法内部，当图片加载完成后，创建图片dom等操作，展示预览的图片。由于要替换图片所以给上传文件的按钮设置一个属性zidingyiname,所以在替换图片的时候，通过该属性就可以区分这个按钮要替换图片，遍历filesList把重复了的zidingyiname的file给删除。</li>
<li>在这个方法的最后，把file对象push进filesList中，姑且认为这个是要上传的图片的数组。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">var filesList = [];</div><div class="line">var thumbnail = function (e) &#123;</div><div class="line">		var $house_imgs = $(&quot;.house-img-upload&quot;).eq(0);</div><div class="line">		var $IDcard_imgs = $(&quot;.IDcard-img-upload&quot;).eq(0);</div><div class="line">		var This = $(this);</div><div class="line">		loadImage(</div><div class="line">	        e.target.files[0],</div><div class="line">	        function (img) &#123;</div><div class="line">	        	var $width = $(&quot;.file&quot;).eq(0).width();</div><div class="line">	        	var $heigth = &apos;96&apos;; </div><div class="line">	        	// 设置图片显示的方法，这个方法应该拿出来，太忙了，没时间。</div><div class="line">	        	if ($width/$heigth &gt; $(img).attr(&apos;width&apos;)/$(img).attr(&apos;height&apos;)) &#123;</div><div class="line">	        		var ratio = $heigth/$(img).attr(&apos;height&apos;);</div><div class="line">	        		$(img).css(&#123;</div><div class="line">		        		width: ratio*$(img).attr(&apos;width&apos;)+&apos;px&apos;,</div><div class="line">						height: $heigth+&apos;px&apos;</div><div class="line">		        	&#125;);</div><div class="line">	        	&#125; else if($width/$heigth &lt; $(img).attr(&apos;width&apos;)/$(img).attr(&apos;height&apos;))&#123;</div><div class="line">	        		var ratio = $width/$(img).attr(&apos;width&apos;);</div><div class="line">	        		$(img).css(&#123;</div><div class="line">	        			width: $width+&apos;px&apos;,</div><div class="line">						height: ratio*$(img).attr(&apos;height&apos;)+&apos;px&apos;</div><div class="line">	        		&#125;)</div><div class="line">	        	&#125;else &#123;</div><div class="line">	        		var ratio = $width/$(img).attr(&apos;width&apos;);</div><div class="line">	        		$(img).css(&#123;</div><div class="line">	        			width: $width+&apos;px&apos;,</div><div class="line">						height: ratio*$(img).attr(&apos;height&apos;)+&apos;px&apos;</div><div class="line">	        		&#125;)</div><div class="line">	        	&#125;</div><div class="line">																				        	    　　　　This.parent().find(&apos;.plus&apos;).remove().end().find(&apos;.text&apos;).remove().end().find(&apos;img&apos;).remove();</div><div class="line">	        	This.before($(img));</div><div class="line">	        	This.parent().parent().next().css(&apos;display&apos;,&apos;inline-block&apos;);</div><div class="line">	        &#125;</div><div class="line">	    );</div><div class="line">    	e.target.files[0].zidingyiname = This.attr(&apos;name&apos;);</div><div class="line">    	for (var i=0,l=filesList.length;i&lt;l;i++) &#123;</div><div class="line">    		if (This.attr(&apos;name&apos;) == filesList[i].zidingyiname) &#123;</div><div class="line">    			filesList.splice(i,1)</div><div class="line">    			break;</div><div class="line">    		&#125;</div><div class="line">    	&#125;</div><div class="line">		filesList.push(e.target.files[0]);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	$(&apos;.fileupload&apos;).bind(&apos;change&apos;,thumbnail);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4、图片上传"><a href="#4、图片上传" class="headerlink" title="4、图片上传"></a>4、图片上传</h3><ul>
<li>通过html5进行图片的上传，var formData = new FormData();创建formData对象，然后将需要上传的参数append到formData对象中。将上文提到的filesLlist进行遍历append到formData中。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">$(&quot;#submitOrder&quot;).on(&apos;click&apos;, function() &#123;</div><div class="line">		var userName = $(&quot;#userName&quot;).val().trim();</div><div class="line">		var amount = $(&quot;#amount&quot;).val().trim();</div><div class="line">		var zhouqiSelect = $(&quot;#zhouqiSelect&quot;).find(&apos;select&apos;).eq(0).val();</div><div class="line">		// 从url中获取productId;</div><div class="line">		var url  = window.location.href;</div><div class="line">		var productId = url.split(&quot;#&quot;)[1];</div><div class="line">		</div><div class="line">		if (userName.length != 0 &amp;&amp; userName.length&lt;5 &amp;&amp; amount.length != 0 &amp;&amp;$(&quot;.house-img-upload&quot;).eq(0).find(&quot;img&quot;).length != 0) &#123;</div><div class="line">			</div><div class="line">			var $upload_loading = $(&quot;#upload_loading&quot;);</div><div class="line">			</div><div class="line">			$upload_loading.fadeIn();</div><div class="line">			</div><div class="line">			</div><div class="line">			var formData = new FormData();</div><div class="line">			for (var i=0,l=filesList.length;i&lt;l;i++) &#123;</div><div class="line">				formData.append(filesList[i].zidingyiname,filesList[i]);</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			formData.append(&apos;name&apos;,userName);</div><div class="line">			formData.append(&apos;amount&apos;,amount);</div><div class="line">			formData.append(&apos;zhouqi&apos;,zhouqiSelect);</div><div class="line">			formData.append(&apos;productId&apos;,productId);</div><div class="line">			formData.append(&apos;userId&apos;,$.cookie(&apos;userId&apos;));</div><div class="line">			formData.append(&apos;sectionId&apos;,$.cookie(&apos;sectionId&apos;));</div><div class="line">			formData.append(&apos;token&apos;,$.cookie(&apos;token&apos;));</div><div class="line">			</div><div class="line">		    $.ajax(&#123;</div><div class="line">		        url: urlEndPoint,  //server script to process data</div><div class="line">		        type: &apos;POST&apos;,</div><div class="line">		        data: formData,</div><div class="line">		        cache: false,</div><div class="line">		        contentType: false,</div><div class="line">		        processData: false</div><div class="line">		    &#125;).done(function(res) &#123;</div><div class="line">		    	$upload_loading.fadeOut();</div><div class="line">		    	</div><div class="line">		    	CommonFn.saveCookie(&#123;&quot;tips&quot;:res.tips&#125;)</div><div class="line">		    	</div><div class="line">		    	var _url = &apos;./orderSuccess.html&apos;;</div><div class="line">				</div><div class="line">				CommonFn.turnPageByPlatform(_url);</div><div class="line">			&#125;).fail(function(res) &#123;</div><div class="line">				$upload_loading.fadeOut();</div><div class="line">				formData = null;</div><div class="line">				alert(&apos;上传失败，请重新上传！&apos;);</div><div class="line">				 window.location.reload();</div><div class="line">			&#125;);;</div><div class="line">		&#125; else&#123;</div><div class="line">			alert(&quot;信息填写不正确！&quot;);</div><div class="line">		&#125;</div><div class="line">	&#125;);</div></pre></td></tr></table></figure></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;####　该上传方法对于不支持html5的浏览器无法使用。主要针对移动浏览器。&lt;/p&gt;
&lt;h3 id=&quot;1、html&quot;&gt;&lt;a href=&quot;#1、html&quot; class=&quot;headerlink&quot; title=&quot;1、html&quot;&gt;&lt;/a&gt;1、html&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;div class=&amp;quot;upload_img&amp;quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;div  class=&amp;quot;file&amp;quot;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;lt;span class=&amp;quot;plus&amp;quot;&amp;gt;+&amp;lt;/span&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;lt;span class=&amp;quot;text&amp;quot;&amp;gt;请拍照上传&amp;lt;/span&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;lt;input  class=&amp;quot;fileupload&amp;quot; type=&amp;quot;file&amp;quot; name=&amp;quot;fangchanzheng1&amp;quot; accept=&amp;quot;image/*&amp;quot; capture=&amp;quot;camera&amp;quot; /&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;p class=&amp;quot;info&amp;quot;&amp;gt; 房产证照片 &amp;lt;/p&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;/div&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;type 是file 加上&lt;strong&gt;capture=”camera”&lt;/strong&gt; 可以在移动端打开摄像头。
    
    </summary>
    
    
      <category term="html5" scheme="http://yanfenqiang.com/tags/html5/"/>
    
      <category term="移动端" scheme="http://yanfenqiang.com/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
      <category term="图片上传" scheme="http://yanfenqiang.com/tags/%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/"/>
    
  </entry>
  
  <entry>
    <title>html5地理位置</title>
    <link href="http://yanfenqiang.com/2017/02/12/html5/html5%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE/"/>
    <id>http://yanfenqiang.com/2017/02/12/html5/html5地理位置/</id>
    <published>2017-02-12T11:27:44.979Z</published>
    <updated>2017-02-12T12:11:25.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1、判断设备是否支持地理位置"><a href="#1、判断设备是否支持地理位置" class="headerlink" title="1、判断设备是否支持地理位置"></a>1、判断设备是否支持地理位置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">function getLocation() &#123;</div><div class="line">	if (navigator.geolocation) &#123;</div><div class="line">		navigator.geolocation.getCurrentPosition(showPosition);</div><div class="line">	&#125; else &#123;</div><div class="line">		x.innerHTML = &quot;该浏览器不支持获取地理位置。&quot;;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2、获取地理位置经纬度"><a href="#2、获取地理位置经纬度" class="headerlink" title="2、获取地理位置经纬度"></a>2、获取地理位置经纬度</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">function showPosition(position) &#123;</div><div class="line">	x.innerHTML = &quot;Latitude: &quot; + position.coords.latitude +</div><div class="line">			&quot;&lt;br&gt;Longitude: &quot; + position.coords.longitude;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="3、通过百度将经纬度转化成地理位置信息"><a href="#3、通过百度将经纬度转化成地理位置信息" class="headerlink" title="3、通过百度将经纬度转化成地理位置信息"></a>3、通过百度将经纬度转化成地理位置信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">function showPosition(position) &#123;</div><div class="line">		</div><div class="line">	var latlon = position.coords.latitude+&apos;,&apos;+position.coords.longitude; </div><div class="line"></div><div class="line">    //baidu </div><div class="line">    var url = &quot;http://api.map.baidu.com/geocoder/v2/?ak=C93b5178d7a8ebdb830b9b557abce78b&amp;callback=renderReverse&amp;location=&quot;+latlon+&quot;&amp;output=json&amp;pois=0&quot;; </div><div class="line">    $.ajax(&#123;  </div><div class="line">        type: &quot;GET&quot;,  </div><div class="line">        dataType: &quot;jsonp&quot;,  </div><div class="line">        url: url, </div><div class="line">        beforeSend: function()&#123; </div><div class="line">            $(&quot;#demo&quot;).html(&apos;正在定位...&apos;); </div><div class="line">        &#125;, </div><div class="line">        success: function (json) &#123;  </div><div class="line">            if(json.status==0)&#123; </div><div class="line">                $(&quot;#demo&quot;).html(json.result.addressComponent.city); </div><div class="line">            &#125; </div><div class="line">        &#125;, </div><div class="line">        error: function (XMLHttpRequest, textStatus, errorThrown) &#123;  </div><div class="line">            $(&quot;#demo&quot;).html(latlon+&quot;地址位置获取失败&quot;);  </div><div class="line">        &#125; </div><div class="line">    &#125;); </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="4、百度地图API返回的json示例："><a href="#4、百度地图API返回的json示例：" class="headerlink" title="4、百度地图API返回的json示例："></a>4、百度地图API返回的json示例：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	&quot;status&quot;: 0,</div><div class="line">	&quot;result&quot;: &#123;</div><div class="line">		&quot;location&quot;: &#123;</div><div class="line">			&quot;lng&quot;: 116.30235223778,</div><div class="line">			&quot;lat&quot;: 39.979262964719</div><div class="line">		&#125;,</div><div class="line">		&quot;formatted_address&quot;: &quot;北京市海淀区巴沟村87号&quot;,</div><div class="line">		&quot;business&quot;: &quot;万柳,苏州桥,万泉河&quot;,</div><div class="line">		&quot;addressComponent&quot;: &#123;</div><div class="line">			&quot;adcode&quot;: &quot;110108&quot;,</div><div class="line">			&quot;city&quot;: &quot;北京市&quot;,</div><div class="line">			&quot;country&quot;: &quot;中国&quot;,</div><div class="line">			&quot;direction&quot;: &quot;东南&quot;,</div><div class="line">			&quot;distance&quot;: &quot;59&quot;,</div><div class="line">			&quot;district&quot;: &quot;海淀区&quot;,</div><div class="line">			&quot;province&quot;: &quot;北京市&quot;,</div><div class="line">			&quot;street&quot;: &quot;巴沟村&quot;,</div><div class="line">			&quot;street_number&quot;: &quot;87号&quot;,</div><div class="line">			&quot;country_code&quot;: 0</div><div class="line">		&#125;,</div><div class="line">		&quot;poiRegions&quot;: [],</div><div class="line">		&quot;sematic_description&quot;: &quot;北京华联(万柳购物中心)东69米&quot;,</div><div class="line">		&quot;cityCode&quot;: 131</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1、判断设备是否支持地理位置&quot;&gt;&lt;a href=&quot;#1、判断设备是否支持地理位置&quot; class=&quot;headerlink&quot; title=&quot;1、判断设备是否支持地理位置&quot;&gt;&lt;/a&gt;1、判断设备是否支持地理位置&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;function getLocation() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	if (navigator.geolocation) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		navigator.geolocation.getCurrentPosition(showPosition);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125; else &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		x.innerHTML = &amp;quot;该浏览器不支持获取地理位置。&amp;quot;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;2、获取地理位置经纬度&quot;&gt;&lt;a href=&quot;#2、获取地理位置经纬度&quot; class=&quot;headerlink&quot; title=&quot;2、获取地理位置经纬度&quot;&gt;&lt;/a&gt;2、获取地理位置经纬度&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;function showPosition(position) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	x.innerHTML = &amp;quot;Latitude: &amp;quot; + position.coords.latitude +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;			&amp;quot;&amp;lt;br&amp;gt;Longitude: &amp;quot; + position.coords.longitude;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="html5" scheme="http://yanfenqiang.com/tags/html5/"/>
    
  </entry>
  
  <entry>
    <title>开始写博客</title>
    <link href="http://yanfenqiang.com/2017/01/26/%E7%AC%AC%E4%B8%80%E5%A4%A9/"/>
    <id>http://yanfenqiang.com/2017/01/26/第一天/</id>
    <published>2017-01-25T17:33:22.223Z</published>
    <updated>2017-01-25T18:41:26.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="开始写博客"><a href="#开始写博客" class="headerlink" title="开始写博客"></a>开始写博客</h2><p>现在的时间是<em>2017年1月26日02:36:48</em>，将近用了3个半小时，把这个完全搭建起来，凌晨5点还要起来坐火车回家。<br>好累啊。</p>
<p>过年来了，就努力加油，向成为最顶尖的程序员而努力！</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;开始写博客&quot;&gt;&lt;a href=&quot;#开始写博客&quot; class=&quot;headerlink&quot; title=&quot;开始写博客&quot;&gt;&lt;/a&gt;开始写博客&lt;/h2&gt;&lt;p&gt;现在的时间是&lt;em&gt;2017年1月26日02:36:48&lt;/em&gt;，将近用了3个半小时，把这个完全搭建起来，凌晨5点
    
    </summary>
    
    
      <category term="随笔" scheme="http://yanfenqiang.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
</feed>
